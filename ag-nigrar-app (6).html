<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×.×’ × ×’×¨×¨×™×</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="××¢×¨×›×ª × ×™×”×•×œ ×•×ª×™×¢×•×“ ×œ× ×’×¨×¨×™× - ×.×’ × ×’×¨×¨×™×">
    <meta name="theme-color" content="#eb3349">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="×.×’ × ×’×¨×¨×™×">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-512.png">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; touch-action: manipulation; background: #f5f5f5; }
        input, textarea { font-size: 16px !important; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; padding-bottom: 100px; }
        .card { background: white; border-radius: 16px; padding: 24px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .input { width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 12px; margin-bottom: 12px; }
        .input:focus { outline: none; border-color: #667eea; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; }
        .btn-danger { background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); color: white; }
        .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .title { font-size: 24px; font-weight: bold; color: #333; }
        .back-btn { background: #f0f0f0; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; }
        .logout-btn { background: #ff5252; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; }
        .category { background: #f8f9fa; border-radius: 12px; margin-bottom: 12px; overflow: hidden; }
        .category-header { padding: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; cursor: pointer; display: flex; justify-content: space-between; }
        .category-content { padding: 16px; }
        .item { display: flex; align-items: center; gap: 12px; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px; }
        .qty-input { width: 60px; padding: 8px; border: 2px solid #ddd; border-radius: 8px; text-align: center; }
        .footer { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 16px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .menu-item { background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: pointer; margin-bottom: 16px; }
        .user-info { background: #e8f5e9; color: #2e7d32; padding: 8px 16px; border-radius: 8px; font-size: 14px; display: inline-block; }
        .error-msg { background: #ffebee; color: #c62828; padding: 12px; border-radius: 8px; margin-bottom: 12px; text-align: center; }
        .login-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .login-card { background: white; border-radius: 20px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); max-width: 400px; width: 100%; }
        .counter { display: flex; align-items: center; gap: 8px; }
        .counter-btn { width: 40px; height: 40px; border: none; border-radius: 8px; font-size: 20px; font-weight: bold; cursor: pointer; }
        .counter-btn.minus { background: #ff5252; color: white; }
        .counter-btn.plus { background: #4caf50; color: white; }
        textarea { resize: vertical; min-height: 80px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;
        
        const WHATSAPP = '972545500180';
        const REPAIR_TRELLO = 'user63386408+hy3ks08zacthtdktpfjz@boards.trello.com';
        
        const USERS_DB = {
            'teicher': { password: 'AT123456', name: 'Teicher' },
            'odelya': { password: 'od123456', name: 'Odelya' },
            'omri': { password: 'om123456', name: 'Omri' },
            'shadi': { password: 'sh123456', name: 'Shadi' },
            'user260': { password: 'us123456', name: 'User 260' },
            'user749': { password: 'us123456', name: 'User 749' },
            'user869': { password: 'us123456', name: 'User 869' },
            'user408': { password: 'us123456', name: 'User 408' },
            'asad': { password: 'as123456', name: 'Asad' }
        };

        const TRELLO_USERS = [
            { id: 'odelya17', name: 'Odelya' },
            { id: 'omrisadi', name: 'Omri' },
            { id: 'shadihamad', name: 'Shadi' },
            { id: 'user63161260', name: 'User 260' },
            { id: 'user83099749', name: 'User 749' },
            { id: 'user48274869', name: 'User 869' },
            { id: 'user63386408', name: 'User 408' },
            { id: 'asadahmad20', name: 'Asad' }
        ];

        function App() {
            const [loggedUser, setLoggedUser] = useState(() => {
                try { return localStorage.getItem('user') || null; } catch { return null; }
            });
            const [screen, setScreen] = useState('menu');
            const [email, setEmail] = useState(() => {
                try { return localStorage.getItem('email') || ''; } catch { return ''; }
            });

            const saveEmail = (val) => {
                setEmail(val);
                try { localStorage.setItem('email', val); } catch {}
            };

            const logout = () => {
                try { localStorage.removeItem('user'); } catch {}
                setLoggedUser(null);
                setScreen('menu');
            };

            if (!loggedUser) return <Login setUser={setLoggedUser} />;

            const userName = USERS_DB[loggedUser]?.name || loggedUser;

            if (screen === 'menu') return <Menu setScreen={setScreen} userName={userName} logout={logout} />;
            if (screen === 'repair') return <Repair setScreen={setScreen} userName={userName} logout={logout} />;
            if (screen === 'order') return <Order setScreen={setScreen} email={email} saveEmail={saveEmail} userName={userName} logout={logout} />;
            if (screen === 'inventory') return <Inventory setScreen={setScreen} email={email} saveEmail={saveEmail} userName={userName} logout={logout} />;
        }

        function Login({ setUser }) {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleLogin = () => {
                if (!username || !password) {
                    setError('× × ×œ××œ× ×©× ××©×ª××© ×•×¡×™×¡××”');
                    return;
                }
                const user = USERS_DB[username.toLowerCase()];
                if (user && user.password === password) {
                    try { localStorage.setItem('user', username.toLowerCase()); } catch {}
                    setUser(username.toLowerCase());
                } else {
                    setError('×©× ××©×ª××© ××• ×¡×™×¡××” ×©×’×•×™×™×');
                }
            };

            return (
                <div className="login-container">
                    <div className="login-card">
                        <div style={{textAlign: 'center', marginBottom: 30}}>
                            <div style={{width: 100, height: 100, background: 'linear-gradient(135deg, #eb3349, #f45c43)', borderRadius: '50%', margin: '0 auto 20px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 48, color: 'white', fontWeight: 'bold'}}>×.×’</div>
                            <h1 style={{fontSize: 28, marginBottom: 8}}>×.×’ × ×’×¨×¨×™×</h1>
                            <p style={{color: '#666'}}>×”×ª×—×‘×¨×•×ª ×œ××¢×¨×›×ª</p>
                        </div>
                        {error && <div className="error-msg">{error}</div>}
                        <input className="input" type="text" placeholder="×©× ××©×ª××©" value={username} onChange={e => setUsername(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleLogin()} />
                        <input className="input" type="password" placeholder="×¡×™×¡××”" value={password} onChange={e => setPassword(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleLogin()} />
                        <button className="btn btn-primary" onClick={handleLogin}>×”×ª×—×‘×¨</button>
                    </div>
                </div>
            );
        }

        function Menu({ setScreen, userName, logout }) {
            return (
                <div className="container">
                    <div style={{textAlign: 'center', padding: '40px 0'}}>
                        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 20}}>
                            <div className="user-info">ğŸ‘¤ {userName}</div>
                            <button className="logout-btn" onClick={logout}>×”×ª× ×ª×§</button>
                        </div>
                        <div style={{width: 100, height: 100, background: 'linear-gradient(135deg, #eb3349, #f45c43)', borderRadius: '50%', margin: '0 auto 20px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 48, color: 'white', fontWeight: 'bold'}}>×.×’</div>
                        <h1 style={{fontSize: 32, marginBottom: 8}}>×.×’ × ×’×¨×¨×™×</h1>
                        <p style={{color: '#666'}}>××¢×¨×›×ª × ×™×”×•×œ ×•×ª×™×¢×•×“</p>
                    </div>
                    <div className="menu-item" onClick={() => setScreen('repair')}>
                        <div style={{fontSize: 48}}>ğŸ”§</div>
                        <div style={{fontSize: 20, fontWeight: 'bold', marginTop: 12}}>×›×¨×˜×™×¡ ×ª×™×§×•×Ÿ</div>
                        <div style={{fontSize: 14, color: '#666'}}>×“×•×— ×ª×™×§×•×Ÿ ××¤×•×¨×˜</div>
                    </div>
                    <div className="menu-item" onClick={() => setScreen('order')}>
                        <div style={{fontSize: 48}}>ğŸ“¦</div>
                        <div style={{fontSize: 20, fontWeight: 'bold', marginTop: 12}}>×”×–×× ×ª ×¦×™×•×“</div>
                        <div style={{fontSize: 14, color: '#666'}}>×‘×¨×’×™×, × ×¢×œ×™×™×, ×—×©××œ</div>
                    </div>
                    <div className="menu-item" onClick={() => setScreen('inventory')}>
                        <div style={{fontSize: 48}}>ğŸ“‹</div>
                        <div style={{fontSize: 20, fontWeight: 'bold', marginTop: 12}}>×¡×¤×™×¨×ª ××œ××™</div>
                        <div style={{fontSize: 14, color: '#666'}}>×¡×¤×™×¨×ª × ×’×¨×¨×™×</div>
                    </div>
                </div>
            );
        }

        function Repair({ setScreen, userName, logout }) {
            const [name, setName] = useState('');
            const [phone, setPhone] = useState('');
            const [trailer, setTrailer] = useState('');
            const [notes, setNotes] = useState('');
            const [users, setUsers] = useState({});
            const [expanded, setExpanded] = useState({});
            const [items, setItems] = useState({});

            const categories = {
                '××‘×™×–×¨×™×': ['×œ×•×—×•×ª ×–×•×”×¨×™×', '××—×–×™×¨ ××•×¨ ××¨×•×‘×¢', '××©×•×œ×©×™×', '×™×“×™×ª × ×¢×™×œ×” ×’×“×•×œ', '×™×“×™×ª × ×¢×™×œ×” ×§×˜×Ÿ', '×›× ×£ ×œ×’×¨×•×¨ 1 ×¡×¨×Ÿ', '×›× ×£ ×œ×’×¨×•×¨ 2 ×¡×¨× ×™×', '×©×¨×©×¨×ª + ×©××§×œ×™×', '×›× × ×ª ×§×˜× ×”', '×¨×¦×•×¢×ª ×§×©×™×¨×”', '×”×›× ×” ×•×”×¢×‘×¨×ª ×˜×¡×˜', '×¤×¡ ×§×™×©×¨×”', '×˜×‘×¢×ª ×©×§×•×¢×”', '×‘×•×›× ×” ×œ×“×œ×ª ×¦×“', '×§×¤×™×¥ ×œ×“×œ×ª ×¨××¤×”', '××¡×’×¨×•×ª'],
                '×¡×¨×Ÿ / ×‘×œ××™×': ['×›×£ ×¨×™×ª×•× 750 ×§"×’', '×›×£ ×¨×™×ª×•× 2 ×˜×•×Ÿ', '×›×£ ×¨×™×ª×•× 3.5 ×˜×•×Ÿ', '×’×¨××•×©×§×”', '×‘×•×›× ×” ×œ×¤×•×©×¤×•×œ', '×¤×•×©×¤×•×œ 2000 ×§"×’', '×¤×•×©×¤×•×œ 3000 ×§"×’', '×¤×•×©×¤×•×œ 3500 ×§"×’', '×¡×¨×Ÿ 750 ×§"×’', '×¡×¨×Ÿ 1300 ×§"×’', '×¡×¨×Ÿ 1350 ×§"×’', '×¡×¨×Ÿ 1800 ×§"×’', '×¡×¨×Ÿ ×§×¨××•×Ÿ', '××™×¡×‘', '×—×¨×™×˜×ª ×“×¨××™×', '×”×—×œ×¤×ª ×‘×œ××™×', '×“×¨× ×œ×’×¨×•×¨', '×›×‘×œ ×—×¨×•×', '×›×‘×œ ×‘×¨×§×¡'],
                '×¨×’×œ×™ ×—× ×™×”': ['×’×œ×’×œ ×œ×¨×’×œ', '×¨×’×œ ×—× ×™×” ×§×˜× ×”', '×¨×’×œ ×—× ×™×” ×’×“×•×œ×”', '×¨×’×œ HD', '×¨×’×œ ×—×§×œ××™×ª', '×ª×•×©×‘×ª'],
                '×—×©××œ': ['×ª×§×¢ ×œ× ×’×¨×¨', '×©×§×¢ ×œ×¨×›×‘', '×¤×× ×œ ××•×¨×•×ª', '×¤× ×¡ ×¦×“', '×¡×˜ LED ×¢× ×”×ª×§× ×”', '×¡×˜ LED ×œ×œ× ×”×ª×§× ×”', '×¤× ×¡ ×§×•××¤×œ×˜', '××ª×× 13/7', '×¨××© ×—×›×', '×ª×™×§×•×Ÿ ×—×©××œ', '×ª×§×¢ ×›×•×œ×œ ×¢×‘×•×“×”'],
                '×¦××™×’×™×': ['×¦××™×’ 155/13', '×§×•××¤×œ×˜ 155/13', '×¦××™×’ 165/13', '×§×•××¤×œ×˜ 165/13', '×¦××™×’ 155/70/12', '×§×•××¤×œ×˜ 155/70/12', '×¦××™×’ 195/55/10', '×§×•××¤×œ×˜ 195/55/10', '×¦××™×’ 185/14', '×§×•××¤×œ×˜ 185/14', '×¦××™×’ 195/14', '×§×•××¤×œ×˜ 195/14', '×’\'× ×˜ 10"', '×’\'× ×˜ 12"', '×’\'× ×˜ 13"', '×’\'× ×˜ 14"']
            };

            const sendWhatsApp = () => {
                if (!name || !phone || !trailer) { alert('× × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”×—×•×‘×”'); return; }
                const selectedUsers = Object.keys(users).filter(k => users[k]).map(id => '@' + id).join(' ');
                let report = '×“×•×— ×ª×™×§×•×Ÿ × ×’×¨×¨\n\n×©×: ' + name + '\n×˜×œ×¤×•×Ÿ: ' + phone + '\n× ×’×¨×¨: ' + trailer + '\n× ×•×¦×¨ ×¢×œ ×™×“×™: ' + userName + '\n';
                if (selectedUsers) report += '\n××™×•×¢×“ ×œ: ' + selectedUsers + '\n';
                report += '\n×¤×¨×™×˜×™×:\n';
                Object.keys(items).forEach(item => { if (items[item] > 0) report += 'â€¢ ' + item + ' x' + items[item] + '\n'; });
                if (notes) report += '\n×”×¢×¨×•×ª:\n' + notes + '\n';
                window.open('https://wa.me/' + WHATSAPP + '?text=' + encodeURIComponent(report), '_blank');
            };

            const sendTrello = () => {
                if (!name || !phone || !trailer) { alert('× × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”×—×•×‘×”'); return; }
                const selectedUsers = Object.keys(users).filter(k => users[k]).map(id => '@' + id).join(' ');
                let report = '×“×•×— ×ª×™×§×•×Ÿ × ×’×¨×¨\n\n×©×: ' + name + '\n×˜×œ×¤×•×Ÿ: ' + phone + '\n× ×’×¨×¨: ' + trailer + '\n× ×•×¦×¨ ×¢×œ ×™×“×™: ' + userName + '\n';
                if (selectedUsers) report += '\n××™×•×¢×“ ×œ: ' + selectedUsers + '\n';
                report += '\n×¤×¨×™×˜×™×:\n';
                Object.keys(items).forEach(item => { if (items[item] > 0) report += 'â€¢ ' + item + ' x' + items[item] + '\n'; });
                if (notes) report += '\n×”×¢×¨×•×ª:\n' + notes + '\n';
                const subject = '× ×’×¨×¨ ' + trailer + ' - ' + name + (selectedUsers ? ' (' + selectedUsers + ')' : '');
                window.location.href = 'mailto:' + REPAIR_TRELLO + '?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(report);
            };

            return (
                <div className="container">
                    <div className="card">
                        <div className="header">
                            <button className="back-btn" onClick={() => setScreen('menu')}>â† ×—×–×¨×”</button>
                            <div className="title">×›×¨×˜×™×¡ ×ª×™×§×•×Ÿ</div>
                            <button className="logout-btn" onClick={logout}>×”×ª× ×ª×§</button>
                        </div>
                        <div className="user-info" style={{marginBottom: 12}}>ğŸ‘¤ {userName}</div>
                        <input className="input" type="text" placeholder="×©× ×œ×§×•×— *" value={name} onChange={e => setName(e.target.value)} />
                        <input className="input" type="tel" placeholder="×˜×œ×¤×•×Ÿ *" value={phone} onChange={e => setPhone(e.target.value)} />
                        <input className="input" type="text" placeholder="××¡×¤×¨ × ×’×¨×¨ *" value={trailer} onChange={e => setTrailer(e.target.value)} />
                        <div style={{background: '#e3f2fd', padding: 12, borderRadius: 8, marginBottom: 12, fontSize: 14, color: '#1976d2'}}>ğŸ“§ ×”×“×•×— ×™×©×œ×— ×œ-Trello ××•×˜×•××˜×™×ª</div>
                        <div style={{background: '#f8f9fa', padding: 12, borderRadius: 8, marginBottom: 12}}>
                            <div style={{fontWeight: 'bold', marginBottom: 8}}>×ª×™×•×’ ××©×ª××©×™×:</div>
                            {TRELLO_USERS.map(u => (
                                <label key={u.id} style={{display: 'flex', alignItems: 'center', gap: 8, padding: 8}}>
                                    <input type="checkbox" checked={users[u.id] || false} onChange={e => setUsers({...users, [u.id]: e.target.checked})} />
                                    <span>{u.name}</span>
                                </label>
                            ))}
                        </div>
                        <textarea className="input" placeholder="×”×¢×¨×•×ª..." value={notes} onChange={e => setNotes(e.target.value)} />
                    </div>
                    {Object.keys(categories).map(cat => (
                        <div key={cat} className="category">
                            <div className="category-header" onClick={() => setExpanded({...expanded, [cat]: !expanded[cat]})}>
                                <span style={{fontWeight: 'bold'}}>{cat}</span>
                                <span>{expanded[cat] ? 'â–²' : 'â–¼'}</span>
                            </div>
                            {expanded[cat] && (
                                <div className="category-content">
                                    {categories[cat].map(item => (
                                        <div key={item} className="item">
                                            <input type="checkbox" checked={(items[item] || 0) > 0} onChange={e => setItems({...items, [item]: e.target.checked ? 1 : 0})} style={{width: 20, height: 20}} />
                                            <span style={{flex: 1}}>{item}</span>
                                            {(items[item] || 0) > 0 && <input className="qty-input" type="number" min="1" value={items[item]} onChange={e => setItems({...items, [item]: parseInt(e.target.value) || 1})} />}
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    ))}
                    <div className="footer">
                        <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12, maxWidth: '600px', margin: '0 auto'}}>
                            <button className="btn" style={{background: 'linear-gradient(135deg, #25D366 0%, #128C7E 100%)', color: 'white'}} onClick={sendWhatsApp}>ğŸ“± ×©×œ×— ×œ×•×•××˜×¡××¤</button>
                            <button className="btn btn-primary" onClick={sendTrello}>ğŸ“§ ×©×œ×— ×œ-Trello</button>
                        </div>
                    </div>
                </div>
            );
        }

        function Order({ setScreen, email, saveEmail, userName, logout }) {
            const [name, setName] = useState('');
            const [phone, setPhone] = useState('');
            const [notes, setNotes] = useState('');
            const [users, setUsers] = useState({});
            const [custom, setCustom] = useState('');
            const [customItems, setCustomItems] = useState([]);

            const sendWhatsApp = () => {
                if (!name || !phone) { alert('× × ×œ××œ× ×©× ×•×˜×œ×¤×•×Ÿ'); return; }
                const selectedUsers = Object.keys(users).filter(k => users[k]).map(id => '@' + id).join(' ');
                let report = '×”×–×× ×ª ×¦×™×•×“\n\n×©×: ' + name + '\n×˜×œ×¤×•×Ÿ: ' + phone + '\n× ×•×¦×¨ ×¢×œ ×™×“×™: ' + userName + '\n';
                if (selectedUsers) report += '\n××™×•×¢×“ ×œ: ' + selectedUsers + '\n';
                if (customItems.length > 0) { report += '\n×¤×¨×™×˜×™×:\n'; customItems.forEach(item => report += 'â€¢ ' + item + '\n'); }
                if (notes) report += '\n×”×¢×¨×•×ª:\n' + notes + '\n';
                window.open('https://wa.me/' + WHATSAPP + '?text=' + encodeURIComponent(report), '_blank');
            };

            const sendTrello = () => {
                if (!name || !phone || !email) { alert('× × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª ×”×—×•×‘×”'); return; }
                const selectedUsers = Object.keys(users).filter(k => users[k]).map(id => '@' + id).join(' ');
                let report = '×”×–×× ×ª ×¦×™×•×“\n\n×©×: ' + name + '\n×˜×œ×¤×•×Ÿ: ' + phone + '\n× ×•×¦×¨ ×¢×œ ×™×“×™: ' + userName + '\n';
                if (selectedUsers) report += '\n××™×•×¢×“ ×œ: ' + selectedUsers + '\n';
                if (customItems.length > 0) { report += '\n×¤×¨×™×˜×™×:\n'; customItems.forEach(item => report += 'â€¢ ' + item + '\n'); }
                if (notes) report += '\n×”×¢×¨×•×ª:\n' + notes + '\n';
                const subject = '×”×–×× ×ª ×¦×™×•×“ - ' + name + (selectedUsers ? ' (' + selectedUsers + ')' : '');
                window.location.href = 'mailto:' + email + '?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(report);
            };

            return (
                <div className="container">
                    <div className="card">
                        <div className="header">
                            <button className="back-btn" onClick={() => setScreen('menu')}>â† ×—×–×¨×”</button>
                            <div className="title">×”×–×× ×ª ×¦×™×•×“</div>
                            <button className="logout-btn" onClick={logout}>×”×ª× ×ª×§</button>
                        </div>
                        <div className="user-info" style={{marginBottom: 12}}>ğŸ‘¤ {userName}</div>
                        <input className="input" type="text" placeholder="×©× *" value={name} onChange={e => setName(e.target.value)} />
                        <input className="input" type="tel" placeholder="×˜×œ×¤×•×Ÿ *" value={phone} onChange={e => setPhone(e.target.value)} />
                        <input className="input" type="email" placeholder="××™×™×œ Trello *" value={email} onChange={e => saveEmail(e.target.value)} />
                        <div style={{background: '#f8f9fa', padding: 12, borderRadius: 8, marginBottom: 12}}>
                            <div style={{fontWeight: 'bold', marginBottom: 8}}>×ª×™×•×’ ××©×ª××©×™×:</div>
                            {TRELLO_USERS.map(u => (
                                <label key={u.id} style={{display: 'flex', alignItems: 'center', gap: 8, padding: 8}}>
                                    <input type="checkbox" checked={users[u.id] || false} onChange={e => setUsers({...users, [u.id]: e.target.checked})} />
                                    <span>{u.name}</span>
                                </label>
                            ))}
                        </div>
                        <div style={{display: 'flex', gap: 8, marginBottom: 12}}>
                            <input className="input" style={{marginBottom: 0}} type="text" placeholder="×”×•×¡×£ ×¤×¨×™×˜..." value={custom} onChange={e => setCustom(e.target.value)} onKeyPress={e => e.key === 'Enter' && custom.trim() && (setCustomItems([...customItems, custom.trim()]), setCustom(''))} />
                            <button className="btn btn-success" style={{width: 100}} onClick={() => custom.trim() && (setCustomItems([...customItems, custom.trim()]), setCustom(''))}>×”×•×¡×£</button>
                        </div>
                        {customItems.length > 0 && (
                            <div style={{background: '#f8f9fa', padding: 12, borderRadius: 8, marginBottom: 12}}>
                                <div style={{fontWeight: 'bold', marginBottom: 8}}>×¤×¨×™×˜×™×:</div>
                                {customItems.map((item, i) => (
                                    <div key={i} style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: 8, background: 'white', borderRadius: 8, marginBottom: 4}}>
                                        <span>{item}</span>
                                        <button style={{background: '#ff5252', color: 'white', border: 'none', padding: '4px 12px', borderRadius: 6, cursor: 'pointer'}} onClick={() => setCustomItems(customItems.filter((_, idx) => idx !== i))}>âœ•</button>
                                    </div>
                                ))}
                            </div>
                        )}
                        <textarea className="input" placeholder="×”×¢×¨×•×ª..." value={notes} onChange={e => setNotes(e.target.value)} />
                    </div>
                    <div className="footer">
                        <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12, maxWidth: '600px', margin: '0 auto'}}>
                            <button className="btn" style={{background: 'linear-gradient(135deg, #25D366 0%, #128C7E 100%)', color: 'white'}} onClick={sendWhatsApp}>ğŸ“± ×©×œ×— ×œ×•×•××˜×¡××¤</button>
                            <button className="btn btn-success" onClick={sendTrello}>ğŸ“§ ×©×œ×— ×œ-Trello</button>
                        </div>
                    </div>
                </div>
            );
        }

        function Inventory({ setScreen, email, saveEmail, userName, logout }) {
            const [notes, setNotes] = useState('');
            const [users, setUsers] = useState({});
            const [counts, setCounts] = useState({});
            const trailers = ['× ×’×¨×¨ ×¤×ª×•×— YG501', '× ×’×¨×¨ ×¤×ª×•×— YG601', '× ×’×¨×¨ ×¤×ª×•×— YG751', '× ×’×¨×¨ ×¤×ª×•×— YG951', '× ×’×¨×¨ ×¤×ª×•×— YG1101', '× ×’×¨×¨ ×¤×ª×•×— YG1201', '× ×’×¨×¨ ×¡×’×•×¨ YG601', '× ×’×¨×¨ ×¡×’×•×¨ YG751', '× ×’×¨×¨ ×¡×’×•×¨ YG951', '× ×’×¨×¨ 2 ×¡×¨× ×™× YG1302', '× ×’×¨×¨ 2 ×¡×¨× ×™× YG1502', '× ×’×¨×¨ 2 ×¡×¨× ×™× YG2002', '× ×’×¨×¨ ×‘×•×‘×§×˜ YG2550', '× ×’×¨×¨ ×‘×•×‘×§×˜ YG3002', '× ×’×¨×¨ ×’× ×¨×˜×•×¨ YG2302G', '× ×’×¨×¨ ××™× YG1351W', '× ×’×¨×¨ ×“×œ×§ YG601F', '× ×’×¨×¨ ×©×™×¨×•×ª×™× YG2900WC'];
            const total = Object.values(counts).reduce((sum, val) => sum + (val || 0), 0);

            const sendWhatsApp = () => {
                const selectedUsers = Object.keys(users).filter(k => users[k]).map(id => '@' + id).join(' ');
                let report = '×¡×¤×™×¨×ª ××œ××™\n\n×ª××¨×™×š: ' + new Date().toLocaleDateString('he-IL') + '\n× ×¡×¤×¨ ×¢×œ ×™×“×™: ' + userName + '\n';
                if (selectedUsers) report += '\n××™×•×¢×“ ×œ: ' + selectedUsers + '\n';
                report += '\n× ×’×¨×¨×™×:\n';
                trailers.forEach(t => { if (counts[t] > 0) report += 'â€¢ ' + t + ': ' + counts[t] + '\n'; });
                report += '\n×¡×”"×›: ' + total + ' × ×’×¨×¨×™×\n';
                if (notes) report += '\n×”×¢×¨×•×ª:\n' + notes + '\n';
                window.open('https://wa.me/' + WHATSAPP + '?text=' + encodeURIComponent(report), '_blank');
            };

            const sendTrello = () => {
                if (!email) { alert('× × ×œ××œ× ××™×™×œ Trello'); return; }
                const selectedUsers = Object.keys(users).filter(k => users[k]).map(id => '@' + id).join(' ');
                let report = '×¡×¤×™×¨×ª ××œ××™\n\n×ª××¨×™×š: ' + new Date().toLocaleDateString('he-IL') + '\n× ×¡×¤×¨ ×¢×œ ×™×“×™: ' + userName + '\n';
                if (selectedUsers) report += '\n××™×•×¢×“ ×œ: ' + selectedUsers + '\n';
                report += '\n× ×’×¨×¨×™×:\n';
                trailers.forEach(t => { if (counts[t] > 0) report += 'â€¢ ' + t + ': ' + counts[t] + '\n'; });
                report += '\n×¡×”"×›: ' + total + ' × ×’×¨×¨×™×\n';
                if (notes) report += '\n×”×¢×¨×•×ª:\n' + notes + '\n';
                const subject = '×¡×¤×™×¨×ª ××œ××™ - ' + new Date().toLocaleDateString('he-IL') + (selectedUsers ? ' (' + selectedUsers + ')' : '');
                window.location.href = 'mailto:' + email + '?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(report);
            };

            return (
                <div className="container">
                    <div className="card">
                        <div className="header">
                            <button className="back-btn" onClick={() => setScreen('menu')}>â† ×—×–×¨×”</button>
                            <div className="title">×¡×¤×™×¨×ª ××œ××™</div>
                            <button className="logout-btn" onClick={logout}>×”×ª× ×ª×§</button>
                        </div>
                        <div className="user-info" style={{marginBottom: 12}}>ğŸ‘¤ {userName}</div>
                        <input className="input" type="email" placeholder="××™×™×œ Trello *" value={email} onChange={e => saveEmail(e.target.value)} />
                        <div style={{background: '#f8f9fa', padding: 12, borderRadius: 8, marginBottom: 12}}>
                            <div style={{fontWeight: 'bold', marginBottom: 8}}>×ª×™×•×’ ××©×ª××©×™×:</div>
                            {TRELLO_USERS.map(u => (
                                <label key={u.id} style={{display: 'flex', alignItems: 'center', gap: 8, padding: 8}}>
                                    <input type="checkbox" checked={users[u.id] || false} onChange={e => setUsers({...users, [u.id]: e.target.checked})} />
                                    <span>{u.name}</span>
                                </label>
                            ))}
                        </div>
                        <div style={{background: '#9c27b0', color: 'white', padding: 16, borderRadius: 12, textAlign: 'center', marginBottom: 16}}>
                            <div style={{fontSize: 32, fontWeight: 'bold'}}>{total}</div>
                            <div>×¡×”"×› × ×’×¨×¨×™×</div>
                        </div>
                        <textarea className="input" placeholder="×”×¢×¨×•×ª..." value={notes} onChange={e => setNotes(e.target.value)} />
                    </div>
                    {trailers.map(t => (
                        <div key={t} className="card" style={{padding: 16}}>
                            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>
                                <span style={{flex: 1, fontSize: 14}}>{t}</span>
                                <div className="counter">
                                    <button className="counter-btn minus" onClick={() => setCounts({...counts, [t]: Math.max(0, (counts[t] || 0) - 1)})}>âˆ’</button>
                                    <div style={{width: 60, textAlign: 'center', fontSize: 18, fontWeight: 'bold'}}>{counts[t] || 0}</div>
                                    <button className="counter-btn plus" onClick={() => setCounts({...counts, [t]: (counts[t] || 0) + 1})}>+</button>
                                </div>
                            </div>
                        </div>
                    ))}
                    <div className="footer">
                        <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12, maxWidth: '600px', margin: '0 auto'}}>
                            <button className="btn" style={{background: 'linear-gradient(135deg, #25D366 0%, #128C7E 100%)', color: 'white'}} onClick={sendWhatsApp}>ğŸ“± ×©×œ×— ×œ×•×•××˜×¡××¤</button>
                            <button className="btn btn-danger" onClick={sendTrello}>ğŸ“§ ×©×œ×— ×œ-Trello</button>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => console.log('SW registered:', registration))
                    .catch(error => console.log('SW registration failed:', error));
            });
        }
    </script>
</body>
</html>